{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\main_1.js"],"names":["UserData","name","level","vip","Base64","cc","Class","extends","Component","properties","btn_storage","default","type","Button","btn_read","btn_remove","btn_clear","label_control","Label","label_cipherData","label_decryptionData","userdata_name","EditBox","userdata_level","userdata_vip","onLoad","string","require","_readData","label_cipherData_text","label_decryptionData_text","dataText","decryptionText","k","sys","localStorage","getItem","decodeURI","atob","saveUserDataEvent","JSON","stringify","ciphertext","btoa","encodeURI","setItem","readUserDataEvent","removeUserDataEvent","removeItem","clearUserDataEvent","clear"],"mappings":"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","file":"main_1.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\nvar UserData = {\r\n    name: \"小逗逼\",\r\n    level: 1,\r\n    vip: false\r\n};\r\n\r\nvar Base64;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        btn_storage:{\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        btn_read: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        btn_remove: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        btn_clear: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        label_control: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        label_cipherData: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        label_decryptionData: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        userdata_name:{\r\n            default: null,\r\n            type: cc.EditBox\r\n        },\r\n        userdata_level:{\r\n            default: null,\r\n            type: cc.EditBox\r\n        },\r\n        userdata_vip:{\r\n            default: null,\r\n            type: cc.EditBox\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.userdata_name.string = UserData.name;\r\n        this.userdata_level.string = UserData.level;\r\n        this.userdata_vip.string = UserData.vip;\r\n        Base64 = require(\"base64\");\r\n    },\r\n\r\n    _readData: function () {\r\n        var label_cipherData_text = \"\";\r\n        var label_decryptionData_text = \"\";\r\n        var dataText, decryptionText;\r\n        for(var k in UserData) {\r\n            var dataText = cc.sys.localStorage.getItem(k);\r\n            if (dataText === null) {\r\n                break;\r\n            }\r\n            decryptionText = decodeURI(atob(dataText));\r\n            // Decrypt\r\n            label_cipherData_text += k + \":\" + dataText + \"\\n\";\r\n            label_decryptionData_text += k + \":\" + decryptionText + \"\\n\";\r\n        }\r\n        this.label_cipherData.string = label_cipherData_text;\r\n        this.label_decryptionData.string = label_decryptionData_text;\r\n    },\r\n\r\n    saveUserDataEvent: function () {\r\n        UserData.name = this.userdata_name.string;\r\n        UserData.level = this.userdata_level.string;\r\n        UserData.vip = this.userdata_vip.string;\r\n        // Encrypt\r\n        var dataText = JSON.stringify(UserData);\r\n        var ciphertext;\r\n        for(var k in UserData) {\r\n            ciphertext = btoa(encodeURI(UserData[k]));\r\n            cc.sys.localStorage.setItem(k, ciphertext);\r\n        }\r\n        this.label_control.string = \"存储用户数据\";\r\n        this.label_cipherData.string = \"存储完毕\";\r\n        this.label_decryptionData.string = \"存储完毕\";\r\n    },\r\n    \r\n    readUserDataEvent: function () {\r\n        this.label_control.string = \"读取用户数据\";\r\n        this._readData();\r\n    },\r\n\r\n    removeUserDataEvent: function () {\r\n        cc.sys.localStorage.removeItem(\"vip\");\r\n        this.label_control.string = \"移除用户数据\";\r\n        this._readData();\r\n    },\r\n\r\n    clearUserDataEvent: function () {\r\n        cc.sys.localStorage.clear();\r\n        this.label_control.string = \"清空用户数据\";\r\n        this._readData();\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}